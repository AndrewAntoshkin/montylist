export const MONTAGE_ANALYSIS_PROMPT = `ЗАДАЧА:

Проанализируй это видео и создай детальный монтажный лист в формате кинопроизводства. Для КАЖДОГО плана укажи:

1. Точные таймкоды начала и конца
2. Тип плана
3. КРАТКОЕ описание действия (1-2 предложения - ЧТО происходит в кадре)
4. Все диалоги с указанием говорящего
5. Все закадровые голоса (ГЗК)
6. Все надписи на экране (НДП)
7. Описание музыки и звуков

Будь максимально детальным и точным. Не пропускай ни одного плана.

ПРИНЯТЫЕ СОКРАЩЕНИЯ:
ЗТМ - затемнение
НДП - надписи на экране
ГЗК - голос за кадром
ПНР - панорама
Рапид - ускоренная съёмка
Наезд - приближение камеры
Отъезд - отдаление камеры

ТИПЫ ПЛАНОВ (в порядке увеличения масштаба):
• Дальний - человек занимает очень маленькое место в кадре
• Общий (Общ.) - человек в полный рост
• Средний (Ср.) - человек по колени или по пояс
• Крупный (Кр.) - в кадре голова и плечи человека
• Деталь/Сверхкрупный - часть лица (глаза, рот) или небольшой предмет

ПРАВИЛА ТРАНСКРИПЦИИ АУДИО:
• Если слово неразборчиво, но можно предположить: указать слово
• Если совсем непонятно: (...)
• Если фраза звучит неразборчиво: (Неразборчиво)
• Указывать говорящего: (Мужчина), (Женщина), (Имя персонажа)

ФОРМАТ ОТВЕТА (СТРОГО СОБЛЮДАТЬ):

**ЧЧ:ММ:СС - ЧЧ:ММ:СС**
*   **План:**  [Тип плана - используй сокращения: Кр., Ср., Общ., Дальний, Деталь]
*   **Содержание:** [КРАТКОЕ описание - что происходит в кадре в 1-2 предложениях. Примеры: "Из подъезда дома выходит Петя", "По улице идут люди", "Парень прыгает через скакалку"]
*   **Диалоги/Музыка:** [ВСЕ аудио из этого плана:
    - Диалог (Имя персонажа): текст реплики
    - ГЗК: текст закадрового голоса  
    - НДП: текст надписи на экране
    - Музыка: описание музыки/звуков
    Если диалогов нет - просто "Музыка" или оставь пустым]

ПРИМЕРЫ:

**Пример 1:**
**00:01:14:23 - 00:01:21:16**
*   **План:** Общ.
*   **Содержание:** Из подъезда дома выходит Петя.
*   **Диалоги/Музыка:** Музыка

**Пример 2:**
**00:01:21:17 - 00:01:28:02**
*   **План:** Общ.
*   **Содержание:** По улице идут люди.
*   **Диалоги/Музыка:** 
    Музыка
    Петя (за кадром): Говорят, позитивные мысли делают жизнь человека более уравновешенной...

**Пример 3:**
**00:02:47:23 - 00:02:54:22**
*   **План:** 1 Ср.
*   **Содержание:** Петя смотрит на незнакомца.
*   **Диалоги/Музыка:**
    ...я чего-то заблудился.
    Петя: Так это вам в другой район надоехать.
    Незнакомец: Да ты что!
    Петя: Да.
    Незнакомец: В этом городишке есть другой район?
    Музыка

**Пример 4:**
**00:00:00 - 00:00:01**
*   **План:** Деталь
*   **Содержание:** Логотип телеканала на черном фоне.
*   **Диалоги/Музыка:**
    ГЗК: (Мужчина) Пятый канал.
    НДП: 5 ПРЕДСТАВЛЯЕТ
    Музыка: Звук колокольчиков, легкий эмбиент.

ВАЖНО: 
- "Содержание" = КРАТКОЕ описание (1-2 предложения)
- "Диалоги/Музыка" = ВСЕ тексты и аудио`;

/**
 * Creates a chunk-specific prompt (simplified - no timecode confusion)
 * Model always outputs timecodes starting from 00:00:00 for each chunk
 * We'll adjust them on the backend based on chunk start time
 */
export function createChunkPrompt(
  chunkIndex: number,
  startTimecode: string,
  endTimecode: string,
  totalChunks: number
): string {
  // Простой промпт для всех чанков - без сложных инструкций про таймкоды
  // Модель выдает таймкоды с 00:00:00, мы корректируем их на бэкенде
  if (totalChunks > 1) {
    return `${MONTAGE_ANALYSIS_PROMPT}

⚠️ ВАЖНО: Это часть ${chunkIndex + 1} из ${totalChunks} всего видео.
Анализируй видео с начала. Используй таймкоды начиная с 00:00:00.`;
  }
  
  return MONTAGE_ANALYSIS_PROMPT;
}
