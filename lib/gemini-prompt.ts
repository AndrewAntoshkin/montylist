export const MONTAGE_ANALYSIS_PROMPT = `ЗАДАЧА:

Проанализируй это видео и создай детальный монтажный лист в формате кинопроизводства. Для КАЖДОГО плана укажи:

1. Точные таймкоды начала и конца
2. Тип плана
3. Детальное визуальное описание (что в кадре, действия, движения камеры)
4. Краткое содержание для колонки "Содержание/Титры"
5. ВСЕ диалоги с указанием говорящего
6. Все закадровые голоса
7. Все надписи на экране
8. Описание музыки и звуков

Будь максимально детальным и точным. Не пропускай ни одного плана.

ПРИНЯТЫЕ СОКРАЩЕНИЯ:
ЗТМ - затемнение
НДП - надписи на экране
ГЗК - голос за кадром
ПНР - панорама
Рапид - ускоренная съёмка
Наезд - приближение камеры
Отъезд - отдаление камеры

ТИПЫ ПЛАНОВ (в порядке увеличения масштаба):
• Дальний - человек занимает очень маленькое место в кадре
• Общий (Общ.) - человек в полный рост
• Средний (Ср.) - человек по колени или по пояс
• Крупный (Кр.) - в кадре голова и плечи человека
• Деталь/Сверхкрупный - часть лица (глаза, рот) или небольшой предмет

ПРАВИЛА ТРАНСКРИПЦИИ АУДИО:
• Если слово неразборчиво, но можно предположить: указать слово
• Если совсем непонятно: (...)
• Если фраза звучит неразборчиво: (Неразборчиво)
• Указывать говорящего: (Мужчина), (Женщина), (Имя персонажа)

ФОРМАТ ОТВЕТА (СТРОГО СОБЛЮДАТЬ):

**ЧЧ:ММ:СС - ЧЧ:ММ:СС**
*   **План:**  [Просто тип - используй сокращения]
*   **Содержание:** [Подробное описание плана - что видно в кадре, действия персонажей, движения камеры, композиция - смотри примеры ниже]
*   **Диалог (Персонаж):** [Текст реплики] ИЛИ
*   **ГЗК:** [Текст закадрового голоса] ИЛИ
*   **НДП:** [Текст надписи на экране] ИЛИ
*   **Музыка:** [Описание музыки, звуков]

ПРИМЕРЫ СОДЕРЖАНИЯ:

Двор. Летний день. Лиза и Ольга идут, поворачиваются лицом к камере.

Камера назад.

Внезапно Ольга останавливается, хватается рукой за столб. Лиза идёт к камере, поворачивает лицо в сторону Ольги. Ольга падает на колени на пешеходной дорожке. Лиза ставит чемодан, возвращается к Ольге, присаживается перед ней, говорит.

Камера вперёд.

Ольга стоит на коленях лицом к камере, беспомощно ощупывает перед собой руками, говорит, берёт сумочку, передаёт её Лизе. Лиза берёт сумочку, говорит, ставит перед собой на дорожку, достаёт из неё зеркальце.

Сердитая Ольга сидит на краю ванной, беседует с Лизой, стоящей у входа в ванную комнату, вскакивает, идёт в сторону камеры, проходит мимо Лизы, уходит. Лиза провожает её взглядом.`;

export function createChunkPrompt(
  chunkIndex: number,
  startTimecode: string,
  endTimecode: string,
  totalChunks: number
): string {
  if (totalChunks > 1) {
    return `${MONTAGE_ANALYSIS_PROMPT}

⚠️ Это часть ${chunkIndex + 1} из ${totalChunks} всего фильма. 
Анализируй видео начиная с таймкода 00:00:00.`;
  }
  
  return MONTAGE_ANALYSIS_PROMPT;
}
