export const MONTAGE_ANALYSIS_PROMPT = `ЗАДАЧА:

Проанализируй это видео и создай детальный монтажный лист в формате кинопроизводства. Для КАЖДОГО плана укажи:

1. Точные таймкоды начала и конца
2. Тип плана
3. ВИЗУАЛЬНОЕ описание (что ВИДНО на экране - действия персонажей, жесты, мимика, движения камеры, обстановка. НЕ пересказывай диалоги!)
4. Все диалоги с указанием говорящего
5. Все закадровые голоса (ГЗК)
6. Все надписи на экране (НДП)
7. Описание музыки и звуков

⚠️ КРИТИЧЕСКИ ВАЖНО:
- В поле "Содержание" описывай ТОЛЬКО визуальную картинку (что видно глазами)
- В поле "Диалоги/Музыка" пиши что слышно (речь, звуки)
- НИКОГДА не пиши диалоги в поле "Содержание"!

Будь максимально детальным и точным. Не пропускай ни одного плана.

ПРИНЯТЫЕ СОКРАЩЕНИЯ:
ЗТМ - затемнение
НДП - надписи на экране
ГЗК - голос за кадром
ПНР - панорама
Рапид - ускоренная съёмка
Наезд - приближение камеры
Отъезд - отдаление камеры

ТИПЫ ПЛАНОВ (в порядке увеличения масштаба):
• Дальний - человек занимает очень маленькое место в кадре
• Общий (Общ.) - человек в полный рост
• Средний (Ср.) - человек по колени или по пояс
• Крупный (Кр.) - в кадре голова и плечи человека
• Деталь/Сверхкрупный - часть лица (глаза, рот) или небольшой предмет

ПРАВИЛА ТРАНСКРИПЦИИ АУДИО:
• Если слово неразборчиво, но можно предположить: указать слово
• Если совсем непонятно: (...)
• Если фраза звучит неразборчиво: (Неразборчиво)
• Указывать говорящего: (Мужчина), (Женщина), (Имя персонажа)

ФОРМАТ ОТВЕТА (СТРОГО СОБЛЮДАТЬ):

**ЧЧ:ММ:СС - ЧЧ:ММ:СС** (формат: часы:минуты:секунды, БЕЗ кадров)
*   **План:**  [Тип плана - используй сокращения: Кр., Ср., Общ., Дальний, Деталь]
*   **Содержание:** [ВИЗУАЛЬНОЕ описание - что ВИДНО на экране, а НЕ что говорят персонажи! Описывай действия, движения, жесты, мимику, обстановку, детали. НИКОГДА не пересказывай диалоги в этом поле! Примеры: "Мужчина смотрит на ноутбук, затем на женщину", "Женщина протягивает ноутбук мужчине", "Женщина печатает на ноутбуке, на экране появляется сообщение"]
*   **Диалоги/Музыка:** [ВСЕ аудио из этого плана:
    - Диалог (Имя персонажа): текст реплики
    - ГЗК: текст закадрового голоса  
    - НДП: текст надписи на экране
    - Музыка: описание музыки/звуков
    Если диалогов нет - просто "Музыка" или оставь пустым]

ПРИМЕРЫ:

**Пример 1:**
**00:01:14:23 - 00:01:21:16**
*   **План:** Общ.
*   **Содержание:** Из подъезда дома выходит Петя, идет по двору к воротам.
*   **Диалоги/Музыка:** Музыка

**Пример 2:**
**00:01:21:17 - 00:01:28:02**
*   **План:** Общ.
*   **Содержание:** По улице идут люди. Камера медленно панорамирует вправо.
*   **Диалоги/Музыка:** 
    Музыка
    Петя (ГЗК): Говорят, позитивные мысли делают жизнь человека более уравновешенной...

**Пример 3:**
**00:02:47:23 - 00:02:54:22**
*   **План:** Ср.
*   **Содержание:** Петя смотрит на незнакомца, затем качает головой и показывает рукой направление.
*   **Диалоги/Музыка:**
    Незнакомец: ...я чего-то заблудился.
    Петя: Так это вам в другой район надо ехать.
    Незнакомец: Да ты что!
    Петя: Да.
    Незнакомец: В этом городишке есть другой район?
    Музыка

**Пример 4:**
**00:00:00:00 - 00:00:01:00**
*   **План:** Деталь
*   **Содержание:** Логотип телеканала на черном фоне.
*   **Диалоги/Музыка:**
    ГЗК: (Мужчина) Пятый канал.
    НДП: 5 ПРЕДСТАВЛЯЕТ
    Музыка: Звук колокольчиков, легкий эмбиент.

**Пример 5:**
**00:00:32:00 - 00:00:36:00**
*   **План:** Ср.
*   **Содержание:** Двор. Летний день. Ольга стоит лицом к камере, на коленях, на пешеходной дорожке, смотрит в зеркальце, которое держит в руках. Рядом с ней, на корточках, сидит Лиза.
*   **Диалоги/Музыка:**
    Музыка

**Пример 6:**
**00:31:50:00 - 00:31:54:00**
*   **План:** Кр.
*   **Содержание:** Мужчина смотрит на ноутбук, затем переводит взгляд на женщину.
*   **Диалоги/Музыка:**
    (Мужчина): Ну что ты там опять пытаешься найти, а?

ВАЖНО: 
- "Содержание" = ВИЗУАЛЬНОЕ описание (что ВИДНО - действия, жесты, обстановка, движения камеры)
- "Диалоги/Музыка" = АУДИО (что СЛЫШНО - речь, звуки, музыка)
- НИКОГДА не дублируй диалоги в поле "Содержание"!`;

/**
 * Creates a chunk-specific prompt (simplified - no timecode confusion)
 * Model always outputs timecodes starting from 00:00:00 for each chunk
 * We'll adjust them on the backend based on chunk start time
 */
export function createChunkPrompt(
  chunkIndex: number,
  startTimecode: string,
  endTimecode: string,
  totalChunks: number
): string {
  // Простая инструкция для чанков - модель выдает таймкоды с 00:00:00
  // Бэкенд корректирует их добавляя chunk.startTime
  if (totalChunks > 1) {
    return `${MONTAGE_ANALYSIS_PROMPT}

⚠️ Это часть ${chunkIndex + 1} из ${totalChunks} всего фильма. 
Анализируй видео начиная с таймкода 00:00:00.`;
  }
  
  return MONTAGE_ANALYSIS_PROMPT;
}

