# üîç –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –ø–ª–∞–Ω–æ–≤

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**PySceneDetect –Ω–∞—à—ë–ª: 1065 –ø–ª–∞–Ω–æ–≤**  
**–†–µ–∞–ª—å–Ω—ã–π –º–æ–Ω—Ç–∞–∂–Ω—ã–π –ª–∏—Å—Ç: 1061 –ø–ª–∞–Ω**  
**–†–∞–∑–Ω–∏—Ü–∞: –≤—Å–µ–≥–æ 4 –ø–ª–∞–Ω–∞!**

–≠—Ç–æ –æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ, –∑–Ω–∞—á–∏—Ç PySceneDetect —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º—ã **–ù–ï –¢–ï–†–Ø–ï–ú** –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–ª–∞–Ω–∞.

---

## –ì–¥–µ –º–æ–≥—É—Ç —Ç–µ—Ä—è—Ç—å—Å—è –ø–ª–∞–Ω—ã

### 1. ‚úÖ Init Processing (init-processing-v5)
- **PySceneDetect:** 1184 —Å—Ü–µ–Ω—ã ‚Üí –ø–æ—Å–ª–µ –º–µ—Ä–¥–∂–∞ 1091 ‚Üí –ø–æ—Å–ª–µ —Ç–∏—Ç—Ä–æ–≤ 1065
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ 1065 —Å—Ü–µ–Ω –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ chunk processing

### 2. ‚úÖ Chunk Processing (process-chunk-v5)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã —Å–æ–∑–¥–∞—ë—Ç—Å—è entry
- **–õ–æ–≥–∏–∫–∞:** `for (let sceneIndex = 0; sceneIndex < scenesInChunk.length; sceneIndex++)`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞:** –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `plansCreated === scenesInChunk.length`

### 3. ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –º–µ—Å—Ç–∞ –ø–æ—Ç–µ—Ä–∏

#### A. Scene Merging (scene-post-processing)
- –ú–µ—Ä–¥–∂ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Ü–µ–Ω –º–æ–∂–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤ –æ–¥–Ω—É
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ä–¥–∂ –Ω–µ —Ç–µ—Ä—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã

#### B. Credits Detection
- –û—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ/–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ —Ç–∏—Ç—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∏—Ç—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

#### C. Chunk Boundaries
- –°—Ü–µ–Ω—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —á–∞–Ω–∫–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ü–µ–Ω—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ–±–∞ —á–∞–Ω–∫–∞ (—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)

#### D. Database Upsert
- –û—à–∏–±–∫–∏ –ø—Ä–∏ upsert –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –ø–ª–∞–Ω–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ upsert (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

#### E. Empty Scenes
- –ü—É—Å—Ç—ã–µ —Å—Ü–µ–Ω—ã (–±–µ–∑ –¥–∏–∞–ª–æ–≥–æ–≤) –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—É—Å—Ç—ã–µ —Å—Ü–µ–Ω—ã —Ç–æ–∂–µ —Å–æ–∑–¥–∞—é—Ç entry

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ process-chunk-v5:
```typescript
// –ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏ entry –¥–ª—è –í–°–ï–• —Å—Ü–µ–Ω
const expectedPlans = scenesInChunk.length;
if (plansCreated !== expectedPlans) {
  console.error(`‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ü–æ—Ç–µ—Ä—è –ø–ª–∞–Ω–æ–≤!`);
  console.error(`–û–∂–∏–¥–∞–ª–æ—Å—å: ${expectedPlans}, –°–æ–∑–¥–∞–Ω–æ: ${plansCreated}`);
  console.error(`–ü–û–¢–ï–†–Ø–ù–û: ${expectedPlans - plansCreated} –ø–ª–∞–Ω–æ–≤!`);
}
```

---

## –ü–ª–∞–Ω –ø—Ä–æ–≤–µ—Ä–∫–∏

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ process-chunk-v5 (—Å–¥–µ–ª–∞–Ω–æ)
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ - –Ω–∞–π—Ç–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å init-processing-v5 - —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ 1065 —Å—Ü–µ–Ω –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
4. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å scene merging - –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ª–∏ —Å—Ü–µ–Ω—ã –ø—Ä–∏ –º–µ—Ä–¥–∂–µ
5. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å chunk boundaries - –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ª–∏ —Å—Ü–µ–Ω—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö
6. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å empty scenes - —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–∏ entry –¥–ª—è –ø—É—Å—Ç—ã—Ö —Å—Ü–µ–Ω

---

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **1065 –ø–ª–∞–Ω–æ–≤** (–∏–ª–∏ –±–ª–∏–∑–∫–æ –∫ 1061, –µ—Å–ª–∏ PySceneDetect –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–ª).

–ï—Å–ª–∏ –º–µ–Ω—å—à–µ - –∏—â–µ–º, –≥–¥–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø–ª–∞–Ω—ã.

---

## –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
2025-01-15

## –°—Ç–∞—Ç—É—Å
üîç –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–µ
