# 🎬 НАЧНИТЕ ЗДЕСЬ - Тест сжатия видео

## ✅ ВСЁ ГОТОВО К ТЕСТИРОВАНИЮ!

Dev сервер запущен на порту 3000! ✅

---

## 🚀 ШАГ 1: Откройте приложение

Откройте в браузере (лучше Chrome):

```
http://localhost:3000
```

---

## 🔐 ШАГ 2: Залогиньтесь

Войдите в систему и перейдите в Dashboard с монтажными листами.

---

## 🎯 ШАГ 3: Найдите ДВЕ кнопки

В правом верхнем углу Dashboard вы увидите:

```
┌──────────────────────────────────────────┐
│  Монтажные листы                         │
│                                          │
│                    ┌──────────────────┐  │
│                    │ 🔵 Тестовая      │  │
│                    │    загрузка      │  │
│                    │                  │  │
│                    │ (НОВАЯ, синяя)   │  │
│                    └──────────────────┘  │
│                                          │
│                    ┌──────────────────┐  │
│                    │ ⚪ Новый лист    │  │
│                    │                  │  │
│                    │ (СТАРАЯ, белая)  │  │
│                    └──────────────────┘  │
└──────────────────────────────────────────┘
```

**Важно:** Обе кнопки работают!
- Синяя = с browser-side сжатием
- Белая = без сжатия (как раньше)

---

## 🔵 ШАГ 4: Нажмите синюю кнопку "Тестовая загрузка"

Откроется модальное окно:

```
╔══════════════════════════════════════╗
║  Тестовая загрузка (с сжатием)      ║
║  ⏳ Загрузка модуля сжатия...       ║
╠══════════════════════════════════════╣
║                                      ║
║     ┌─────────────────────┐         ║
║     │                     │         ║
║     │  📤 Загрузка FFmpeg │         ║
║     │     (~30 секунд)    │         ║
║     │                     │         ║
║     └─────────────────────┘         ║
║                                      ║
╚══════════════════════════════════════╝
```

**Подождите ~30 секунд** пока FFmpeg.wasm загрузится.

Когда готово, увидите:
```
✅ Модуль сжатия готов
```

---

## 📁 ШАГ 5: Загрузите тестовое видео

**Для первого теста используйте:**

| Параметр | Значение | Почему |
|----------|----------|--------|
| 📦 Размер | 100-500 МБ | Не больше для первого теста |
| 🎬 Формат | MP4 | Лучшая совместимость |
| ⏱️ Длительность | 5-10 минут | Быстрая обработка |

**Способы загрузки:**
1. Перетащите файл в область
2. Нажмите "Выбрать видео"

После выбора увидите:
```
╔════════════════════════════════╗
║  📹 video.mp4                 ║
║  450.5 MB • 8м 30с            ║
║                                ║
║  🗜️ Будет сжато до ~180MB    ║
╚════════════════════════════════╝
```

---

## ▶️ ШАГ 6: Нажмите "Начать"

Начнется процесс сжатия и загрузки:

### Фаза 1: Сжатие (2-5 минут)

```
╔════════════════════════════════╗
║  🗜️  Сжатие видео...          ║
║                                ║
║  [████████████░░░░░░] 67%      ║
║                                ║
║  Сжатие происходит             ║
║  в вашем браузере              ║
╚════════════════════════════════╝
```

**Что происходит:**
- FFmpeg.wasm работает прямо в браузере
- Используется ваш CPU (не сервер!)
- Может нагреться компьютер - это нормально

### Фаза 2: Загрузка (~1 минута)

```
╔════════════════════════════════╗
║  📤 Загрузка на сервер...     ║
║                                ║
║  [███████████████░░] 89%       ║
║                                ║
║  Оригинал: 450.5MB             ║
║  Сжато: 178.2MB                ║
╚════════════════════════════════╝
```

### Фаза 3: Готово! ✅

```
╔════════════════════════════════╗
║  ✅ Готово!                    ║
║                                ║
║  Видео загружено и начинается  ║
║  AI обработка                  ║
╚════════════════════════════════╝
```

Модал закроется, видео появится во вкладке **"В работе"**.

---

## 📊 ШАГ 7: Проверьте результат

### В Dashboard:

1. Переключитесь на вкладку **"В работе"**
2. Увидите ваше видео со статусом **"Processing"**
3. Размер будет ~180 МБ (вместо оригинальных 450 МБ)

### В консоли браузера (F12):

```javascript
✅ FFmpeg.wasm loaded successfully
📊 Original size: 450.23MB
🎯 Target: 180MB, Duration: 510s, Bitrate: 2744k
🗜️  Starting compression...
✅ Compressed size: 178.45MB
📤 Uploading compressed file...
✅ Upload complete! Video ID: abc-123
✅ Chunks initialized: 1 chunks
✅ Processing started
```

---

## 🎯 Что тестировать

### 1. Скорость сжатия
- ⏱️ Сколько времени заняло?
- 💻 Насколько нагрелся компьютер?

### 2. Качество после сжатия
- 🎬 Открывается ли видео?
- 👁️ Читаются ли титры?
- 📊 Размер: близко к 180 МБ?

### 3. AI обработка
- ✅ Запустилась ли обработка?
- 📝 Создаются ли сцены в базе?
- ⏰ Корректные ли таймкоды?

---

## 🐛 Troubleshooting

### Проблема: "Модуль сжатия не загружается"

```bash
# Перезапустите dev сервер:
npm run dev

# Очистите кеш браузера:
# Chrome: Cmd+Shift+R (Mac) или Ctrl+Shift+R (Win)
```

### Проблема: "Сжатие зависло на 0%"

1. Откройте консоль браузера (F12)
2. Проверьте ошибки
3. Попробуйте другой файл (MP4, меньшего размера)

### Проблема: "Браузер завис"

- Закройте другие вкладки
- Используйте файл <500 МБ для теста
- Попробуйте Chrome (лучшая поддержка WebAssembly)

---

## 📚 Дополнительная документация

| Файл | Описание |
|------|----------|
| `QUICK_TEST_COMPRESSION.md` | Быстрая инструкция |
| `COMPRESSION_TEST_GUIDE.md` | Полное руководство + troubleshooting |
| `VIDEO_COMPRESSION_SUMMARY.md` | Техническая сводка |

---

## ✨ Что дальше?

После успешного теста:

### 1. Обновить промпты (для проблем с демо)

```typescript
// lib/gemini-prompt.ts

// Добавить:
- Инструкции для распознавания титров
- Правила для имен персонажей  
- Инструкции для точных таймкодов
```

### 2. Решить про кнопки

**Вариант A:** Оставить две кнопки
- Пользователь выбирает сам
- "С сжатием" vs "Без сжатия"

**Вариант B:** Заменить старую
- Всегда использовать сжатие
- Автоматически (если файл >300 МБ)

### 3. Настроить параметры

```typescript
// В UploadModalCompress.tsx можно изменить:
const targetSizeMB = 180;  // Целевой размер
'-crf', '28',              // Качество сжатия
'-vf', 'scale=-2:720',     // Разрешение
```

---

## 🎉 Готово к тестированию!

**Dev сервер запущен:** ✅  
**Порт:** 3000  
**URL:** http://localhost:3000

**Синяя кнопка добавлена:** ✅  
**Оригинальная кнопка работает:** ✅  
**FFmpeg.wasm установлен:** ✅

---

## 💬 Обратная связь

После теста дайте знать:

1. ✅ Работает ли сжатие?
2. ⏱️ Сколько времени заняло?
3. 🎬 Какое качество после сжатия?
4. 🐛 Были ли проблемы?

---

**Начните прямо сейчас!** → http://localhost:3000

Нажмите синюю кнопку **"Тестовая загрузка"** 🔵




